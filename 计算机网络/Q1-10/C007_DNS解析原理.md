# 7.DNS解析原理

**1. DNS是什么**
- DNS（Domain Names System）**域名翻译成ip地址的服务器**
**2. 查询方式**
- **递归查询：（告诉你ip地址）** 如果 A 请求 B，那么 B 作为请求的接收者一定要给 A 想要的答案
- **迭代查询：（告诉你怎么去搜ip地址）** 如果接收者 B 没有请求者 A 所需要的准确内容，接收者 B 将告诉请求者 A，如何去获得这个内容，但是自己并不去发出请求
**3.域名缓存**
- 在域名服务器解析的时候，使用缓存保存域名和IP地址的映射
- 计算机中DNS的记录也分成了两种缓存方式：
1. 浏览器缓存：浏览器在获取网站域名的实际 IP 地址后会对其进行缓存，减少网络请求的损耗
2. 操作系统缓存：操作系统的缓存其实是用户自己配置的 hosts 文件

**1. 查询过程**
- 首先搜索浏览器的 DNS 缓存，缓存中维护一张域名与 IP 地址的对应表
- 搜索计算机本地Host的DNS缓存
- 搜索本地域名服务器，采用**递归查询**本地域名服务器的 DNS 缓存，查找成功则返回结果
- 本地域名服务器向上级域名服务器进行迭代查询

1. 首先本地域名服务器向根域名服务器发起请求，根域名服务器返回顶级域名服务器的地址给本地服务器
2. 本地域名服务器拿到这个顶级域名服务器的地址后，就向其发起请求，获取权限域名服务器的地址
3. 本地域名服务器根据权限域名服务器的地址向其发起请求，最终得到该域名对应的 IP 地址
4. 本地域名服务器将得到的 IP 地址返回给操作系统，同时自己将 IP 地址缓存起来
5. 操作系统将 IP 地址返回给浏览器，同时自己也将 IP 地址缓存起
6. 至此，浏览器就得到了域名对应的 IP 地址，并将 IP 地址缓存起
